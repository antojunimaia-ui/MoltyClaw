# ğŸ¤– MoltyClaw - O Agente AutÃ´nomo Definitivo

```text
â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘    â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â–ˆâ•— â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘     â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ•”â•
â•šâ•â•     â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â•      â•šâ•â•    â•šâ•â•â•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•šâ•â•â•
```

Bem-vindo ao repositÃ³rio do **MoltyClaw**, um agente autÃ´nomo superpoderoso que utiliza a IA **Mistral** nÃ£o apenas para conversar, mas para **agir**. O MoltyClaw foi projetado como uma ponte entre a inteligÃªncia abstrata e o mundo real, operando o seu sistema Windows e a Internet com total autonomia.

---

## âœ¨ O que o MoltyClaw consegue fazer?

O MoltyClaw nÃ£o Ã© um chatbot comum. Ele entende o seu pedido, elabora um plano, executa uma ou mais ferramentas e sÃ³ depois volta para te dar a resposta.

### ğŸŒ AutomaÃ§Ã£o Web Completa (Playwright AvanÃ§ado)

O MoltyClaw nÃ£o apenas hospeda um navegador, como domina tÃ¡ticas Anti-Bot de nÃ­vel empresarial (Stealth Bypass com Motor do Microsoft Edge) para evadir com sucesso barreiras ReCaptcha (Cloudflare, Google).

- **`GOTO` e Busca Silenciosa (`DDG_SEARCH`)**: Ele abre links e processa dados. Quando banido temporariamente pelo Google, ele executa autonomamente a DuckDuckGo Search API em *background*.
- **`READ_PAGE` e VisÃ£o Estrutural DinÃ¢mica (`INSPECT_PAGE`)**: Faz a raspagem inteligente do texto atual. Seu sistema de visÃ£o utiliza **Mapeamento LÃ³gico por DOM (Operant ID)**, marcando botÃµes visÃ­veis na tela matematicamente e devolvendo uma legenda ao robÃ´ para eliminar falhas de clique e alucinaÃ§Ãµes de HTML.
- **`CLICK`, `TYPE` e `PRESS_ENTER`**: Com a legenda de IDs do `INSPECT_PAGE`, o MoltyClaw pode **clicar cirurgicamente** em menus complexos, **preencher** formulÃ¡rios autonomamente e submetÃª-los como um ser humano de verdade!
- **`SCREENSHOT`**: Ele pode capturar fotos perfeitas do seu monitor interno a qualquer momento e espalhar em mensagens diretas pelo chat.

### âš™ï¸ ExecuÃ§Ã£o de Terminal

- O MoltyClaw foi programado para poder emitir comandos reais para o prompt ou shell local (`cmd`). Ele pode listar diretÃ³rios, criar arquivos, e ler saÃ­das vitais do sistema do computador em que ele estÃ¡ hospedado.

### ï¿½ Gerenciamento de E-mail (Gmail AutÃ´nomo)

- O MoltyClaw recebeu a permissÃ£o e o protocolo IMAP/SMTP embutidos no seu nÃºcleo! VocÃª pode pedir no chat: *"Leia meus Ãºltimos 3 emails"*, *"Exclua aquele email de spam"* ou *"Mande um email profissional pro meu chefe confirmando a entrega das planilhas"*. As aÃ§Ãµes `READ_EMAILS`, `SEND_EMAIL` e `DELETE_EMAIL` trabalham lendo os tokens diretamente no arquivo `.env`.

### ğŸµ IntegraÃ§Ã£o Spotify API (Music Control)

- Acoplado com a API do Spotify via `spotipy`, o agente pode atuar como um DJ. PeÃ§a *"Toque aquela do Daft Punk"*, *"Pause a mÃºsica"* ou *"Pesquise mÃºsicas do the weeknd e crie uma fila"*. Usa as ferramentas `SPOTIFY_PLAY`, `SPOTIFY_PAUSE`, `SPOTIFY_SEARCH` e `SPOTIFY_ADD_QUEUE`. Requer AutenticaÃ§Ã£o no `.env`.

### ğŸ“º Devorador de YouTube (TranscriÃ§Ã£o Oculta)

- Sem precisar gastar horas da sua vida, envie um link do YouTube e diga: *"Molty, faÃ§a um resumo desse vÃ­deo longo"*. Ele usa o motor de `youtube-transcript-api` e a ferramenta `YOUTUBE_SUMMARIZE` para puxar silenciosamente a legenda inteira dos servidores do Google, compreendendo todo o conhecimento do vÃ­deo para te devolver as respostas no chat em formato de resumo!

### ï¿½ğŸ”— MÃºltiplas IntegraÃ§Ãµes Sociais

Ficar preso a um console preto de terminal Ã© coisa do passado! Nossa visÃ£o Ã© criar uma inteligÃªncia artificial acessÃ­vel e onipresente em suas redes sociais primÃ¡rias. As integraÃ§Ãµes do Agente foram acopladas Ã  sua lÃ³gica nativa: nÃ£o importa de onde a mensagem vem, ele consome o mesmo poder das aÃ§Ãµes locais de "Browser" ou "Terminal".

Atualmente possuÃ­mos trÃªs braÃ§os totalmente integrados e funcionais que podem atuar em tempo real com vocÃª ou sua comunidade de amigos:

1. ğŸ“± **WhatsApp (SessÃ£o Criptografada via QR Code)**:
   - **Como funciona:** Um sub-servidor Headless intercepta mensagens via Node.js e orquestra a comunicaÃ§Ã£o bidirecional de mensagens no WhatsApp com a Python Engine.
   - **O que ele faz:** O MoltyClaw intercepta mensagens do seu WhatsApp conectadas e fornece respostas imediatas com base no modelo do Mistral aliado a acesso web orgÃ¢nico direto da palma da sua mÃ£o.
   - **Disparo Ativo (`WHATSAPP_SEND`):** A maioria dos bots hoje em dia Ã© "passivo" (sÃ³ responde se alguÃ©m chamar). O MoltyClaw pode **tomar iniciativa**! PeÃ§a no terminal *"Molty, mande uma mensagem pro meu chefe avisando que estou doente hoje"* e a IA atirarÃ¡ a notificaÃ§Ã£o sozinha pro WhatsApp dele. O recurso sÃ³ Ã© liberado na mente da IA quando vocÃª inicializa o Launcher com o WhatsApp ligado.
   - **SeguranÃ§a Nativa (Whitelist):** Conta com suporte Ã  `WHATSAPP_ALLOWED_NUMBERS` no `.env`. VocÃª escolhe se a IA vai falar com todos do seu contato, ou apenas com os nÃºmeros previamente autorizados por vocÃª.

2. ğŸ§ **Discord (Bot App Protocol)**:
   - **Como funciona:** Um robÃ´ construÃ­do na API oficial de bibliotecas do Discord usando Python que opera conectado sob intenÃ§Ãµes restritas de ler canais e atuar como um membro da sua comunidade.
   - **O que ele faz:** Foi programado para nÃ£o atrapalhar servidores (ignorando discussÃµes alheias). Ele sÃ³ acorda, pensa, e envia respostas caso alguÃ©m **o mencione** (`@MoltyClaw ...`) em canais pÃºblicos ou envie uma **Mensagem Direta (*DM*)**. Enquanto pesquisa a resposta das ferramentas na infraestrutura do Windows, ele exibe elegantemente a barra "*digitando...*" na tela das DMs do app para imersÃ£o extrema de chat.
   - **Disparo Ativo (`DISCORD_SEND`):** Assim como no celular, o bot pode bater na DM do seu amigo sozinho! Fale *"Mande o resumo dessa pesquisa em uma DM pro ID do discord X e avise que eu pedi"* e ele atirarÃ¡ ativamente o conteÃºdo na Privada do usuÃ¡rio.
   - **SeguranÃ§a Nativa (Whitelist):** Conta com suporte Ã  `DISCORD_ALLOWED_USERS` no `.env` mapeando "User IDs" do Discord.

3. âœˆï¸ **Telegram (Python-Telegram-Bot)**:
   - **Como funciona:** O MoltyClaw se conecta ao protocolo super rÃ¡pido do Telegram utilizando o token fornecido via BotFather.
   - **O que ele faz:** Ele funciona perfeitamente em DM respondendo Ã s suas pesquisas interativas e tambÃ©m se sai perfeitamente em Grupos (onde sÃ³ atuarÃ¡ de forma independente caso seja explicitamente respondido ou mencionado, nÃ£o interrompendo conversas paralelas). Manda a mensagem em pedaÃ§os contÃ­nuos se o resultado do MoltyClaw passar do limite de texto da plataforma.
   - **Disparo Ativo (`TELEGRAM_SEND`):** Quer que o bot pesquise informaÃ§Ãµes enquanto vocÃª toma cafÃ© e entregue o "relatÃ³rio" pro seu parceiro ou grupo de trabalho? Ordene que ele dispare a ferramenta com as informaÃ§Ãµes mastigadas num DM pelo `@username` de quem importa, totalmente de graÃ§a.
   - **SeguranÃ§a Nativa (Whitelist):** Conta com suporte Ã  `TELEGRAM_ALLOWED_USERS` no `.env`, avaliado pelo ID de UsuÃ¡rio interno ou pelo `@username` do cliente para bloquear intrometidos.

4. ğŸ¦ **X (antigo Twitter) (API v2)**:
   - **Como funciona:** Um robÃ´ autÃ´nomo conectado aos endpoints oficiais do Twitter (v2) usando `tweepy`.
   - **O que ele faz:** O MoltyClaw monitora sua timeline de menÃ§Ãµes. Toda vez que alguÃ©m der Reply ou Mencionar seu bot (`@SeuRobo`), ele lÃª o que a pessoa disse, junta com a internet (fazendo pesquisas se necessÃ¡rio), e atira um reply de volta com limite perfeito de 280 caracteres.
   - **Disparo Ativo (`X_POST`):** Assim como o robÃ´ ajuda passivamente, se vocÃª o inicializar no seu computador, vocÃª pode mandar ele twittar o que quiser *sem abrir a aba do navegador*! Fale no prÃ³prio terminal ou pelo zap: "Gera um log de atualizaÃ§Ã£o do sistema sarcÃ¡stico e tuÃ­ta lÃ¡" e ele acola sozinho sua postagem na rede.

## ğŸ™ï¸ InteligÃªncia CibernÃ©tica: AudiÃ§Ã£o e Cordas Vocais

Para elevar o MoltyClaw ao prÃ³ximo nÃ­vel em termos de "AssistÃªncia Pessoal Total", habilitamos um sistema bimodal nativo de voz. O MoltyClaw nunca mais ficarÃ¡ surdo ou mudo para vocÃª:

1. **A AudiÃ§Ã£o (API Voxtral - Mistral):** O MoltyClaw Ã© interceptador de Voice Notes! EsqueÃ§a precisar digitar tudo o que precisa. Mande Ã¡udios em MP3, OGG ou os famosos "Ptt's" do WhatsApp, que a engine re-encaminha para o motor de conversÃ£o Transcriber da prÃ³pria Mistral AI, traduzindo o Ã¡udio limpo da sua voz e transformando a conversa no robÃ´ super dinÃ¢mica.
2. **As Cordas Vocais (`VOICE_REPLY` & *Microsoft Edge TTS*):** E nÃ£o Ã© sÃ³ ouvir! Molty consegue ter reaÃ§Ãµes humanas atravÃ©s de vozes neurais realistas. PeÃ§a "Me mande a receita de macarrÃ£o em Ã¡udio" - Ele sintetiza e te re-encaminha como uma mensagem de voz nativa no prÃ³prio WhatsApp, Discord ou Telegram!

---

## ğŸš€ Como Rodar

Este projeto se divide em uma base principal em Python e uma ponte em Node.js (exclusivo para WhatsApp).

### ğŸ“‹ Requisitos Iniciais

1. Python 3.10+
2. Node.js 18+
3. CriaÃ§Ã£o de chaves de API:
   - Cadastre e gere sua chave em [console.mistral.ai](https://console.mistral.ai).
   - *Opcional*: Se for usar o Bot do Discord, crie o aplicativo no [Discord Developer Portal](https://discord.com/developers/applications).
   - *Opcional*: Se for usar o Telegram, crie um Bot gerando o token com o **@BotFather** no Telegram.

### ğŸ› ï¸ InstalaÃ§Ã£o

1. Clone ou baixe este repositÃ³rio.
2. Crie ou configure o seu arquivo `.env` na raiz da pasta:

   ```env
   # InteligÃªncia AnalÃ­tica (Escolha na inicializaÃ§Ã£o via bash)
   MISTRAL_API_KEY=sua_chave_mistral_aqui
   OPENROUTER_API_KEY=sua_chave_openrouter_aqui
   OPENROUTER_MODEL=google/gemini-2.5-flash
   
   # Tokens dos RobÃ´s
   DISCORD_TOKEN=seu_token_discord_aqui_opcional
   TELEGRAM_TOKEN=seu_token_telegram_aqui_opcional
   
   # Credenciais Google
   GMAIL_USER=seu_email@gmail.com
   GMAIL_APP_PASSWORD=sua_senha_segura_de_aplicativo_google
   
   # API do Spotify (opcional)
   SPOTIFY_CLIENT_ID=seu_client_id_aqui
   SPOTIFY_CLIENT_SECRET=seu_client_secret_aqui
   SPOTIFY_REDIRECT_URI=http://localhost:8080
   
   # Filtros de SeguranÃ§a e Contatos Permitidos
   WHATSAPP_ALLOWED_NUMBERS=5511999999999,5511888888888
   DISCORD_ALLOWED_USERS=123456789012345678,987654321098765432
   TELEGRAM_ALLOWED_USERS=seu_usuario_aqui,12345678
   
   # Credenciais da API v2 do Twitter (X)
   TWITTER_BEARER_TOKEN=seu_bearer_token
   TWITTER_API_KEY=sua_api_key
   TWITTER_API_SECRET=sua_api_secret
   TWITTER_ACCESS_TOKEN=seu_access_token
   TWITTER_ACCESS_TOKEN_SECRET=seu_access_token_secret
   ```

3. Instale as dependÃªncias essenciais do mundo Python (incluindo motores stealth e agentes de busca offline):

   ```bash
   pip install -r requirements.txt
   playwright install msedge
   ```

4. Se quiser usar o mÃ³dulo do WhatsApp, instale as dependÃªncias do protocolo (Node.js):

   ```bash
   npm install whatsapp-web.js qrcode-terminal axios dotenv
   ```

### ğŸ® O Launcher Interativo & WebUI Dashboard

EsqueÃ§a inicializaÃ§Ãµes longas! Abra nosso **Launcher** flexÃ­vel direto do seu terminal:

```bash
python start_moltyclaw.py
```

O MoltyClaw te apresentarÃ¡ um menu lindo (com o poder da interface *Rich*) perguntando primeiro pelo seu **Ambiente TÃ¡tico**:

1. **Modo WebUI Dashboard**: Levanta um painel web super moderno (estilo Gateway) localmente na porta `5000` via **Flask**. Nele vocÃª pode gerenciar suas integraÃ§Ãµes (ligar/desligar bots com cliques visuais) e conversar ativamente com o agente gerando renderizaÃ§Ã£o visual (Markdown + DOMPurify) em tempo real!
2. **Modo Terminal & Conectores**: Modo clÃ¡ssico. VocÃª escolhe puramente qual braÃ§o lÃ³gico da IA quer ligar em *background*: WhatsApp, Discord, Telegram, X (Twitter) ou iniciar TODOS DE UMA VEZ!

---

## ğŸ§  Arquitetura Interna

Para desenvolvedores curiosos, eis a estrutura do MoltyClaw:

- `start_moltyclaw.py` -> Gerenciador multithread de subprocessos.
- `src/moltyclaw.py` -> A essÃªncia do agente! ContÃ©m o Prompt de Sistema com regras de Bloqueio JSON (`<tool>`), loop de interaÃ§Ãµes com as *tools* da mÃ¡quina fÃ­sica e do Chromium.
- `src/webui/app.py` -> Servidor Backend assÃ­ncrono Flask acoplando threads seguras da interface web dinamicamente com a lÃ³gica do MoltyClaw.
- `src/webui/templates/index.html` -> Frontend visual responsivo gerando markdown via DOMPurify e Marked.js.
- `src/integrations/whatsapp_server.py` -> API Rest construÃ­da em `aiohttp` carregando o corpo digital.
- `src/integrations/whatsapp_bridge.js` -> Capturador headless silencioso do protocolo Web do WhatsApp.
- `src/integrations/discord_bot.py` -> RobÃ´ conectado via `discord.py` suportando Audio Player em Servidores (`FFmpegPCMAudio`).
- `src/integrations/telegram_bot.py` -> MÃ³dulo assÃ­ncrono conectado usando `python-telegram-bot`.
- `src/integrations/twitter_bot.py` -> RobÃ´ acoplado na API oficial do X (v2) por `tweepy`.

---
**Nota**: O Agente opera com total liberdade dentro das permissÃµes lÃ³gicas do usuÃ¡rio que inicia o script. Tenha cautela caso deixe o seu computador ligado sozinho enquanto pede para o MoltyClaw apagar arquivos do seu disco pelo zap! ğŸ˜‰
